<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
    <style>
        *{
    padding: 0px;
    margin: 0px;
}
body
{
    padding: 0px;
    margin: 0px;
    position: fixed; 
    padding: 0px;
    width: 100%;
}



#lift{
    position: relative;
    z-index: 1;
    padding: 0px;
    margin: 0px;
    display: inline-block;
    width: 100vw;
    height: 100vh;
    background-color: rgb(255, 255, 255);
    
}

#centerLine{
    width: 5px;
    height: 100vh;
    position: absolute;
    left: 25%;
    top: -18%;
    background-color: #fff;
    
}

#LiftHolder {
    position: absolute;
    left: 5200%;
    bottom: 0vh;
    transition: 2s cubic-bezier(1, 1, 1, 1);
}

#liftBox {
            width: 35vh;
            height: 20vh;
            background-image: url('lift1.jpg'); /* Replace 'path/to/lift.jpg' with the actual path to your image */
            background-size: cover; /* Adjust as needed */
            background-position: center; /* Adjust as needed */
            border: 2px solid #2c3e50;
            bottom: 23px;
            margin-left: -53px;
            position: absolute;
        }

#liftText {
  position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 1.5vh;
    background-color: rgb(192, 163, 163);
    margin: 0; /* Remove default margin */
    padding: 5px; /* Add padding for the text */
    border: 1px solid #ccaaaa; /* Add border around the text *//
}





#wallKeys{
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 22vh;
    height: 100vh;
    width: 20px;
    
}
.wallKey{
    position: relative;
    height: 25%;
    margin: 0;
    padding: 0;
    text-align: center;
    background-color: rgb(255, 255, 255);
    
   
}
.divider{
    color: #000000;
    position: absolute;
    bottom: 0;
    height: 20px;
    width: 7vw;
    margin: 40px 100px 220px;
    margin-left: 125px;
    padding: 0;
    background-color: rgba(255, 255, 255, 0.952);
    text-align: center;
    margin-bottom: -30px;
    border: 1px solid;
    box-sizing: border-box;
}

.divs {
    color: #000000;
    position: absolute;
    bottom: -20px;
    height: 20px;
    width: 7vw;
    margin-left: 125px;
    background-color: rgba(255, 255, 255, 0.952);
    text-align: center;
    border: 1px solid;
    box-sizing: border-box;
}

.divr {
    color: #000000;
    position: absolute;
    bottom: -9px;
    height: 20px;
    width: 7vw;
    margin-left: 125px;
    background-color: rgba(255, 255, 255, 0.952);
    text-align: center;
    border: 1px solid;
    box-sizing: border-box;
}

.btn{
    font-size: 6vh;
    
    position: absolute;
    top: 55%;
    left: 0px;
    background-color: rgba(255, 255, 255, 0.952);
    border: 1px solid white; /* Set border color to white */
    box-sizing: border-box;
}
.btns{
    font-size: 6vh;

    position: absolute;
    margin-top: 280px;
    margin-left: 153px;
    background-color: rgba(255, 255, 255, 0.952);
    border: 1px solid white; /* Set border color to white */
    box-sizing: border-box;
    top: 55%;
    left: 0px;
    
}
#groundFD {
    position: absolute;
    left: 0;
    bottom: 0;
    margin-left: 200px;
    margin-bottom: 19.6px;
    background-color: rgba(216, 216, 216, 0.952);
    width: 260px;
    height: 163px;
    border: 1px solid rgb(0, 0, 0);
}

#firstFD {
    position: absolute;
    left: 0;
    bottom: 26.5vh;
    margin-left: 200px;
    background-color: rgba(216, 216, 216, 0.952);
    width: 260px;
    height: 163px;
    border: 1px solid rgb(0, 0, 0);
}

#secondFD {
    position: absolute;
    left: 0;
    bottom: 47vh;
    margin-left: 200px;
    background-color: rgba(216, 216, 216, 0.952);
    width: 260px;
    height: 184px;
    border: 1px solid rgb(0, 0, 0);
}




    </style>
</head>
<body id="body">
    <div id="lift">
        <div id="centerLine">
            <div id="thirdFD"></div>
            <div id="secondFD"></div>
            <div id="firstFD"></div>
            <div id="groundFD"></div>
            

           
            <div id="LiftHolder">
                <img id="liftBox" src="lift1.jpg" alt="Lift Image">
              <!-- Use a div instead of an img -->
              
          </div>
          
            

            <div id="wallKeys">
                <div class="wallKey" onclick="makeRequest()"><div class="divider">Level 2</div></div>
                <div class="wallKey" onclick="makeRequest(1,1)"><div class="divs">Level 1</div><button class="btn" onclick="floorRequest(2)">  ⇩</button></div>
                

                <div class="wallKey" onclick="makeRequest(1,1)"><div class="divr">Level 0 / GL</div><button class="btn" onclick="floorRequest(1)">  ⇩</button></div>
                <div class="wallKey" onclick="makeRequest(1,3)"><div class=""></div><button class="btn" onclick="floorRequest(0)">  ⇧ </button></div>
            </div>
            <div class="wallKey" onclick="makeRequest(1,2)"><div class=""></div><button class="btns" onclick="floorRequest(2)">  ⇧</button></div>

            
        </div>
    </div>
    <script>
        
        // -----------------Declearation ---------------------//
        
        var thirdFD = document.getElementById("thirdFD");
        var secondFD = document.getElementById("secondFD");
        var firstFD = document.getElementById("firstFD");
        var groundFD = document.getElementById("groundFD");
        var lift = document.getElementById("LiftHolder");
        
        const groundF = "0vh";
        const firstF = "23vh";
        const secondF = "47vh";
        const thirdF = "75vh";
        var bool = 0;
        var queuePos = [];
        var queuefloor = [];
        
        
        
        //--------------------- Visuals ---------------------//
        
        
        //------------------- Controllers --------------------//
        
        function makeRequest(butLoc, floor) // returrn request location (inside or outside ) and floor number stats from 0...
        {
            if (butLoc == 0) {
                console.log("Button pressed inside lift");
                var liftLocation = isStoped();
                if (liftLocation == 0) {
        
                    // Code for handling the moving lift condition...
                    console.log("hey");
                    if(returnVHValue(floor) != parseInt(lift.style.bottom)){
                        queuefloor.push(floor);
                        queuePos.push(butLoc);
                        console.log("Pushed");
                    }
                    else{
                        console.log("Not Pushed");
                    }
        
                }
                else{
                    switch (liftLocation) {
                        case 1:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 2:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 3:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 4:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
        
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        default:
                            console.log("Something Went Wrong");
                    }
                }
        
            }
            else {
        
                var liftLocation = isStoped();
                if (liftLocation == 0) {
        
                    // Code for handling the moving lift condition...
                    console.log(lift.style.bottom);
                    if(returnVHValue(floor) != parseInt(lift.style.bottom)){
                        queuefloor.push(floor);
                        queuePos.push(butLoc);   
                        console.log("Pushed");
                    }
                    else{
                        console.log("Not Pushed");
                    }
        
                }
                else {
                    switch (liftLocation) {
                        case 1:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 2:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 3:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 4:
                                        setTimeout(function () {
                                            moveLift(thirdF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        case 4:
                            if (floor == liftLocation) {
                                // open Door.
                                openDoor();
        
                                setTimeout(function () {
                                    closeDoor();
                                }, 1000)
                            }
                            else {
                                switch (floor) {
                                    case 1:
                                        setTimeout(function () {
                                            moveLift(groundF);
                                        }, 1000);
                                        closeDoor();
                                        break;
                                    case 2:
                                        setTimeout(function () {
                                            moveLift(firstF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    case 3:
                                        setTimeout(function () {
                                            moveLift(secondF);
                                        }, 1000)
                                        closeDoor();
                                        break;
                                    default:
                                        console.log("Something Went Wrong under Inner Switch")
                                }
                            }
                            break;
        
                        default:
                            console.log("Something Went Wrong");
                    }
                }
            }
        }
        
        
        // -------------------Check if lift is steady or not--------------------//
        // ------------------ Return 0 if moving -------------------------------//
        // ------------------ Return floor number if steadty -------------------------------//
        
        function isStoped() //Pass the location where to chaeck that is left reached there or not
        {
            var leftLoc = parseInt(window.getComputedStyle(lift, null).getPropertyValue("bottom"));
            var floor1 = parseInt(window.getComputedStyle(groundFD, null).getPropertyValue("bottom"));
            var floor2 = parseInt(window.getComputedStyle(firstFD, null).getPropertyValue("bottom"));
            var floor3 = parseInt(window.getComputedStyle(secondFD, null).getPropertyValue("bottom"));
            var floor4 = parseInt(window.getComputedStyle(thirdFD, null).getPropertyValue("bottom"));
            if (leftLoc == floor1) {
                console.log("Lift is on Ground Floor");
                return 1;
            }
            else if (leftLoc == floor2) {
                console.log("Lift is on First Floor");
                return 2;
            }
            else if (leftLoc == floor3) {
                console.log("Lift is on Second Floor");
                return 3;
            }
            else if (leftLoc == floor4) {
                console.log("Lift is on Third Floor");
                return 4;
            }
            else {
                console.log("Lift is Moving");
                return 0;
            }
        }
        
        
        // ------------------Move Lift To specified Floor --------------------//
        
        function floorRequest(floor) {
            if (floor === 1) {
                // Special case for Level 1, move the lift to Level 0 with a timing of 5 seconds
                moveLift("0vh", 5000);
            } else {
                // For other floors, use the existing function
                makeRequest(1, floor);
            }
        }

        
        // Modify the moveLift function to adjust timing for moving up
        // Modify the moveLift function to adjust timing for moving up
        function moveLift(temp) {
    var destination = parseInt(temp);
    var currentPosition = parseInt(lift.style.bottom);
    var direction = currentPosition < destination ? 1 : -1; // 1 for up, -1 for down
    var travelTime;

    // Adjusted timing based on the destination
    if (destination === 0) {
        travelTime = 10000; // 10 seconds to go up to Level 1
    } else if (destination === 23) {
        travelTime = 10000; // 10 seconds to go up to Level 2
    } else if (destination === 47) {
        travelTime = 15000; // 15 seconds to go up to Level 3
    } else if (destination === 75) {
        travelTime = 20000; // 20 seconds to go up to Level 4
    }

    // Move the elevator to the specified floor with the specified timing
    lift.style.transition = "bottom " + travelTime + "ms ease-in-out";
    lift.style.bottom = temp;

    // Disable transition after the elevator reaches the destination
    setTimeout(function () {
        lift.style.transition = "none";
        openDoor();
        setTimeout(closeDoor, 2000);

        // Handle the next request in the queue
        setTimeout(function () {
            if (typeof (queuefloor[0]) === "undefined") {
                console.log("Success");
            } else {
                makeRequest(queuePos.shift(), queuefloor.shift());
            }
        }, 2000);
    }, travelTime);
}

        
        function handleExternalRequest(floor) {
            console.log("Handling external request at floor: " + floor);
        
            if (floor === isStoped()) {
                openDoor();
                setTimeout(closeDoor, 2000);
                setTimeout(function () {
                    if (typeof (queuefloor[0]) === "undefined") {
                        console.log("Success");
                    } else {
                        makeRequest(queuePos.shift(), queuefloor.shift());
                    }
                }, 2000);
            } else {
                // Check if the requested floor is in the same direction as the elevator is currently moving
                if ((floor < 1 && floor < parseInt(lift.style.bottom)) || (floor > 1 && floor > parseInt(lift.style.bottom))) {
                    // If yes, move the elevator to the requested floor
                    moveLift(returnVHValue(floor) + "vh");
                } else {
                    // If no, add the request to the queue
                    queuefloor.push(floor);
                    queuePos.push(1);
                    console.log("Pushed");
                }
            }
        }
        
        
        
        function returnVHValue(f){
            switch(f){
                case 1:
                return 0;
                break;
                case 2:
                return 23;
                break;
                case 3:
                return 47;
                break;
                case 4:
                return 75;
                break;
            }
        }
        
        
            </script>
        </body>
        </html>